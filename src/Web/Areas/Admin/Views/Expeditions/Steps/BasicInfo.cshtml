@model TravelCleanArch.Web.Areas.Admin.Models.ExpeditionFormViewModel
@using TravelCleanArch.Application.Abstractions.Travel
@{
    var types = ViewBag.ExpeditionTypes as IReadOnlyCollection<ExpeditionTypeDto> ?? [];
    var postUrl = (string?)ViewBag.PostUrl ?? "/admin/expeditions/create/basic-info";
}
<div class="container-fluid">
    <h3 class="mb-3">Expedition - Basic Info</h3>
    <partial name="~/Areas/Admin/Views/Expeditions/Steps/_StepTabs.cshtml" />
    <form method="post" enctype="multipart/form-data" action="@postUrl">
        @Html.AntiForgeryToken()
        @if (Model.Id.HasValue) { <input type="hidden" asp-for="Id" /> }
        <input type="hidden" name="step" value="0" />
        <input type="hidden" name="intent" id="intent" value="stay" />
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="row g-3">
            <div class="col-md-6"><label asp-for="Name"></label><input asp-for="Name" class="form-control" /></div>
            <div class="col-md-6"><label asp-for="Slug"></label><input asp-for="Slug" class="form-control" /></div>
            <div class="col-md-6"><label asp-for="Destination"></label><input asp-for="Destination" class="form-control" /></div>
            <div class="col-md-6"><label asp-for="Region"></label><input asp-for="Region" class="form-control" /></div>
            <div class="col-12"><label asp-for="ShortDescription"></label><textarea asp-for="ShortDescription" class="form-control" rows="3"></textarea></div>
            <div class="col-md-6">
                <label asp-for="ExpeditionTypeId">Expedition Type</label>
                <select asp-for="ExpeditionTypeId" class="form-select">
                    <option value="">-- select --</option>
                    @foreach (var t in types){<option value="@t.Id">@t.Title</option>}
                </select>
            </div>
        </div>
        <div class="mt-3 d-flex gap-2">
            <button type="submit" class="btn btn-success" onclick="document.getElementById('intent').value='stay'">Save Changes</button>
            <button type="submit" class="btn btn-primary" onclick="document.getElementById('intent').value='next'">Save & Next</button>
        </div>
    </form>
</div>

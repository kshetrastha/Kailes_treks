@model TravelCleanArch.Web.Areas.Admin.Models.CertificateDocumentFormViewModel
@{
    var isEdit = Model.Id.HasValue;
    ViewData["Title"] = isEdit ? "Edit Certificate/Document" : "Create Certificate/Document";
}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">@(isEdit ? "Edit" : "Create") Certificate/Document</h2>
        <a class="btn btn-outline-secondary" href="/admin/company/certificates-documents">Back to list</a>
    </div>

    <div class="card"><div class="card-body">
        <form method="post" enctype="multipart/form-data" action="@(isEdit ? $"/admin/company/certificates-documents/{Model.Id}/edit" : "/admin/company/certificates-documents/create")">
            @Html.AntiForgeryToken()
            @if (isEdit)
            {
                <input type="hidden" asp-for="Id" />
            }

            <div class="row g-3">
                <div class="col-md-6"><label asp-for="Title" class="form-label"></label><input asp-for="Title" class="form-control" /><span asp-validation-for="Title" class="text-danger"></span></div>
                <div class="col-md-3"><label asp-for="Category" class="form-label"></label><input asp-for="Category" class="form-control" /><span asp-validation-for="Category" class="text-danger"></span></div>
                <div class="col-md-3"><label asp-for="IssuedOnUtc" class="form-label"></label><input asp-for="IssuedOnUtc" type="date" class="form-control" /><span asp-validation-for="IssuedOnUtc" class="text-danger"></span></div>
                <div class="col-12"><label asp-for="Description" class="form-label"></label><textarea asp-for="Description" class="form-control" rows="4"></textarea><span asp-validation-for="Description" class="text-danger"></span></div>
                <div class="col-md-4"><label asp-for="DocumentFile" class="form-label"></label><input asp-for="DocumentFile" type="file" class="form-control" /><span asp-validation-for="DocumentFile" class="text-danger"></span>@if(!string.IsNullOrWhiteSpace(Model.ExistingFilePath)){<small class="text-muted d-block mt-2">Current file: <a href="/@Model.ExistingFilePath" target="_blank" rel="noopener">View</a></small>}</div>
                <div class="col-md-4"><label asp-for="ThumbnailImage" class="form-label"></label><input asp-for="ThumbnailImage" type="file" class="form-control" accept="image/*" /><span asp-validation-for="ThumbnailImage" class="text-danger"></span>@if(!string.IsNullOrWhiteSpace(Model.ExistingThumbnailPath)){<div class="mt-2"><small class="text-muted d-block">Current thumbnail</small><img src="/@Model.ExistingThumbnailPath" alt="Current thumbnail" style="width: 120px; height: 80px; object-fit: cover; border-radius: 8px;" /></div>}</div>
                <div class="col-md-2"><label asp-for="Ordering" class="form-label"></label><input asp-for="Ordering" class="form-control" /><span asp-validation-for="Ordering" class="text-danger"></span></div>
                <div class="col-md-2 d-flex align-items-end"><div class="form-check mb-2"><input asp-for="IsPublished" class="form-check-input" /><label asp-for="IsPublished" class="form-check-label"></label></div></div>
            </div>

            <div class="mt-4 d-flex gap-2"><button type="submit" class="btn btn-primary">@(isEdit ? "Update" : "Create")</button><a href="/admin/company/certificates-documents" class="btn btn-outline-secondary">Cancel</a></div>
        </form>
    </div></div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
